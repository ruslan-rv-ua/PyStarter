---
hide:
#  - navigation # Hide navigation
 - toc        # Hide table of contents
---

# Генераторні вирази

Деякі прості генератори можна записати у вигляді виразів. Такі вирази виглядають так:

1. Вираз з деякими змінними.
1. Одне чи декілька ключових слів `for`. Задається які значення будуть приймати вищезгадані змінні. Синтаксис відповідає заголовку цикла `for`.
1. Нуль або більше умов, які фільтрують значення змінних. Синтаксис відповідає заголовку оператора `if`. 

Такі вирази називають ***виразами-генераторами*** (generator expressions).

Взагалі синтаксис генераторних виразів повторює синтаксис спискових включень, з тією відмінністю, 
що замість квадратних дужок використовуються круглі. 

Приклад. Необхідно отримати послідовність непарних ступеней числа 2 від 0 до 10 включно. Напишемо спочатку "звичайний" генератор:

```python
def pow2_gen():
    for n in range(11):
        if n % 2:
            yield 2**n
```

Спробуємо знайти суму цих чисел. Функція `sum()` приймає ітерабельний об'єкт, отже ми сміливо можемо передати їй генератор:

	>>> sum(pow2_gen())
	682
	>>>

А тепер напишемо генератор-вираз:

	>>> g = (2**x for x in range(11) if x%2)
	>>> g
	<generator object <genexpr> at 0x0000026146FEE0C0>
	>>> sum(g)
	682
	>>>

	
#### Шахівниця

Спробуємо за допомогою генератор-вираза отримати усі клітинки шахівниці білого кольору:

	>>> columns = 'ABCDEFGH'
	>>> rows = '12345678'
	>>> white_fields_generator = (
	...     column + row
	...     for column in columns
	...     for row in rows
	...     if (columns.index(column)+rows.index(row)) % 2 == 1
	... )
	>>>

Давайте отримаємо усі білі клітинки одним символьним рядком. 
Метод `str.join()` приймає ітерабельний об'єкт, а генератор і є ітерабельним об'єктом:

	>>> print(' '.join(white_fields_generator))
	A2 A4 A6 A8 B1 B3 B5 B7 C2 C4 C6 C8 D1 D3 D5 D7 E2 E4 E6 E8 F1 F3 F5 F7 G2 G4 G6 G8 H1 H3 H5 H7
	>>>

А давайте отримаємо усі білі клітинки перших двох рядів шахівниці. Будемо використовувати генератор як звичайний ітератор самим "примітивним" способом — використовуючи функцію `next()`:

	>>> white_fields_generator = (column + row for column in columns for row in rows if (columns.index(column)+rows.index(row)) % 2 == 1)
	>>> for _ in range(8):
	...     print(next(white_fields_generator))
	...
	A2
	A4
	A6
	A8
	B1
	B3
	B5
	B7
	>>>
	
Зауважте: перед використанням генератор треба створити знову.

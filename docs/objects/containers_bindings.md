# Посилання у контейнерах

У списках і кортежах містяться не об'єкти, 
як може здатись на перший погяд, 
а посилання на об'єкти. 
Давайте переконаємось у цьому. 

Створимо немутабельний кортеж, який буде містити у собі мутабельний список: 

	>>> t = ([1, 1], )
	>>> l = t[0]
	>>> l is t[0]
	True
	>>>
	
І тепер змінюємо список, який міститься у кортежі: 
	
	>>> l[0] = 7
	>>> t
	([7, 1],)
	>>>
	
Так виходить що ми змінили незмінюваний кортеж? 
Ні, кортеж залишився таким як і був. Значенням кортежа є послідовність посилань на об'єкти, 
і ці посилання ніяк не змінились. 
Змінився об'єкт, на який вказує одне з посилань, яке міститься в кортежі. 

Ще приклад. 
Створимо список, який містить у собі ще один список з трьох об'єктів: 

	>>> one_row_matrix = [[0, 0, 0]]
	>>> row = one_row_matrix[0]
	>>> row
	[0, 0, 0]
	>>> row is one_row_matrix[0]
	True
	>>>

А тепер спробуємо зі списка `row` зробити матрицю три на три. 
Для цього скористаємось мультиплікацією послідовностей: 

	>>> matrix = one_row_matrix * 3
	>>> matrix
	[[0, 0, 0], [0, 0, 0], [0, 0, 0]]
	>>>

Начебто отримали те, що хотіли. 
Спробуємо змінити елемент матриці у першому стовпчику першого ряда: 

	>>> matrix[0][0] = 7
	>>> matrix
	[[7, 0, 0], [7, 0, 0], [7, 0, 0]]
	>>>
	
Не зовсім те, на що очікували... Що не так? 

Уся справа у тому, що операція мультиплікації 
"розмножує" не самі об'єкти у послідовності, 
а посилання на них. 

Поглянемо на задачу трошки інакше: 

	>>> row = [0, 0, 0]
	>>> oen_row_matrix = [row]
	>>> oen_row_matrix
	[[0, 0, 0]]
	>>> oen_row_matrix[0] is row
	True
	>>>

І коли ми використовуємо мультиплікацію, то вираз:

	matrix = one_row_matrix * 3
	
фактично означає:

	matrix = [row] * 3
	
В результаті отримуємо список у якому тричі повторюється посилання `inner_list` на один і той самий об'єкт:

	[row, row, row]
	
Отже вираз:

	matrix[0][0] = 7
	
фактично означає:

	row[0] = 7

Так що створити матрицю 
використовуючи мультиплікацію послідовностей 
як наведено у прикладі нижче 
нажаль не вийде:

	n = 5
	matrix = [[0] * n] * n # так повноцінної матриці не отримати!

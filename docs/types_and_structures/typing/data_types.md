---
hide:
#  - navigation # Hide navigation
 - toc        # Hide table of contents
---

# Типи даних в Python

<!-- Усі типи даних в Python можна поділити на:

- ***Змінюваний (Mutable)*** — стан об'єкта може змінюватись після створення об'єкта;
- ***Незмінюваний (Immutable)*** — стан об'єкта не може змінюватись після створення об'єкта.
-->

<!-- ### Примітивні типи даних

- **Числа:**
    - Цілі числа: `int`
    - Числа з плаваючою комою: `float`
    - Комплексні числа: `complex`
- **Інші:**
    - Логічні значення: `bool`
    - Рядки: `str`
    - None (вказівка на відсутність певного значення): `NoneType` -->

По своїй сутності типи даних в Python можна розглядати як:

- ***Число (Number)*** — незмінювана величина, що підтримує числові операції;
- ***Контейнер*** — об'єкти містять у собі посилання на інші об'єкти;
- ***Послідовність (Sequence)*** — кінцевий упорядкований контейнер об'єктів, індексованих невід'ємними числами;
- ***Відображення (Mapping)*** — кінцевий контейнер об'єктів, індексованих довільними індексами;
- ***Викликане (Callable)*** — типи, до яких можна застосовувати операцію виклику функції;
- ***Ітерабельний (Iterable)*** — об'єкт, здатний повертати свої елементи один за одним;
- ***Дескриптор (Descriptor)*** — об'єкт, призначений для контролю доступу до атрибутів

та інші.

У свою чергу, наприклад, послідовності можна розділяти на:

- ***Гомогенні*** — послідовності, у яких всі елементи мають однаковий тип даних (`str, bytes, bytearray, memoryview, array.array`).
- ***Гетерогенні*** — послідовності, у яких елементи можуть мати різні типи даних (`list, tuple, collections.deque`).
- ***Мутабельні*** — `list, bytearray, array.array, collections.deque, memoryview`.
- ***Немутабельні*** — `tuple, str, bytes`.

В Python можна зробити так, щоб ваші класи відповідали певній сутності. 
Для цього клас має реалізувати відповідний протокол.

> ***Протокол*** (в контексті) — набір методів, який має реалізовувати клас щоб відповідати певним сутностям.

Наприклад щоб створити немутабельну послідовність клас має реалізувати методи `__len__` і `__getitem__`. 
Протокол мутабельної послідовності потребує того ж, плюс `__setitem__` і `__delitem__`. 
І, якщо ви бажаєте, щоб ваші об'єкти можна було перебирати ітераціями, ви маєте визначити `__iter__`, який повертає ітератор. 

Ще приклад. Створимо клас, який буде представляти собою контейнер парних цілих чисел. 
І реалізуємо можливість перевіряти чи є число парним за допомогою оператора `in`:

```python
class EvenNumbers:
    def __contains__(self, item):
        return isinstance(item, int) and item % 2 == 0
    
even_numbers = EvenNumbers()
```

Спробуємо:

    >>> 2 in even_numbers
    True
    >>> '2' in even_numbers
    False
    >>> 0 in even_numbers
    True
    >>> 1 in even_numbers
    False
    >>> -2 in even_numbers
    True
    >>>


### Колекції

> Колекція в Python — це програмний об'єкт (контейнер), який використовується для зберігання набору значень одного або різних типів. 
Ці значення можуть будь-якими типами даних, доступними в Python.

Розглянемо основні магічні методи, які використовують при реалізації колекцій:

#### `__getitem__(self, key)`

Визначає поведінку при доступі до елемента використовуючи наступний синтаксис: 

	self[key]`
	
Стосується протоколу змінних і протоколу незмінних контейнерів. 

Для послідовностей `key` має бути цілим або зрізанням. При цьому в методі може бути реалізована інтерпретація від'ємних індексів. 

Метод має піднімати відповідний виняток: 

- `TypeError` — коли тип ключа не підтримується.
- `KeyError` — коли ключу не відповідає жодне значення у відображеннях.
- `IndexError` — якщо ключ виходить за межі ключей послідовності (у тому числі після інтерпретації від'ємних значень).

Цикл `for in` для правильного визначення кінця послідовності очікує, що для недопустимих індексів піднімається виняток `IndexError`.

#### `__len__(self)`

Повертає кількість елементів у контейнері. 
Частина протоколів для мутабельних та немутабельних колекцій. 

#### `__setitem__(self, key, value)`

Визначає поведінку при присвоєнні значення елементу при використанні синтаксису:

	self[key] = value
	
Частина протокола мутабельних колекцій. Має піднімати `KeyError` і `TypeError` у відповідних випадках.

#### `__delitem__(self, key)`

Визначає поведінку при видаленні елемента. 
Частина протокола для мутабельних колекцій. 
Має піднімати відповідний виняток, якщо ключ некоректний.

#### `__iter__(self)`

Повертає ітератор для контейнера.

#### `__reversed__(self)`

Визначає поведінку для вбудованої функції `reversed()`. 
Має повернути "зворотню" версію послідовності. 
Реалізується для послідовностей.

#### `__contains__(self, item)`

Реалізує перевірку належності елемента при використанні синтаксиса:
	
	in/not in
	
Метод не є частиною протокола послідовності, оскільки Python може самостійно виконувати пошук елемента "перебираючи" всю послідовність.

#### Collections and their exceptions:

|           |    List    |    Set     |    Dict    |
|-----------|------------|------------|------------|
| getitem() | IndexError |            |  KeyError  |
| pop()     | IndexError |  KeyError  |  KeyError  |
| remove()  | ValueError |  KeyError  |            |
| index()   | ValueError |            |            |

# Додаткові матеріали

- [Документація: модуль `collections.abc` — абстрактні класи колекцій](https://docs.python.org/3/library/collections.abc.html#collections.abc.Container)